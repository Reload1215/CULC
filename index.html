<!DOCTYPE HTML>
<html>
<head>

	<meta charset="UTF-8">
	<meta name="robots" content="index,follow">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="A javascript class that animates a numerical value by counting to it.">

	<title>CountUp.js</title>

  <link rel="stylesheet" type="text/css" href="https://inorganik.github.io/assets/css/style.css?v=20171206">

  <script src="./countup.min.js" type="module"></script>
  <script src="./demo.js" type="module"></script>
	<script>

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-7742845-9', 'inorganik.github.io');
	ga('send', 'pageview');

	</script>
</head>

<body>
	
	<a class="forkMe" href="https://github.com/inorganik/CountUp.js"><img src="https://inorganik.github.io/assets/img/forkme_custom_indigo.png" alt="Fork me on GitHub"></a>
	<div id="wrap">
		<header>
			<div id="github"><a class="block" href="https://inorganik.github.io"></a></div>
			<div class="leaderLine">////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</div>
			<div id="logo"><a class="block" href="https://inorganik.net"></a></div>
		</header>
		<section>
			<h1>CountUp.js &nbsp;<small id="version" class="lt-gray"></small></h1>
			<p>CountUp.js is a dependency-free, lightweight JavaScript class that can be used to quickly create animations that display numerical data in a more interesting way.</p>
			<p>Install via npm/yarn using the package name &nbsp;<code class="indigo large">countup.js</code>.</p>
			<p>ðŸ†•&ensp; <a href="https://podmap.org">Check out Podmap</a> &mdash; Mapping the world&rsquo;s podcasts.</p>
			<h3 class="marginTop marginBottom"><a class="lime weight700" href="https://github.com/inorganik/CountUp.js">Download on Github</a></h3>
		</section>
		<section>
			<p style="position:absolute; top:5px; left:0;">Current stars:</p>
			<h1 class="jumbo" id="myTargetElement">0</h1>
		</section>
		<section id="errorSection" style="background-color:#FFDCDC; display:none" class="col-inner">
			<h4 id="error" style="color: red" class="noMargin"></h4>
		</section>
		<section>
			<form>
				<h4 class="inlineLeft noMargin weight300">Params:</h4>
				<div class="inlineLeft marginLeft marginRight">
					<input type="text" value="0" id="startVal" style="width:80px">
					<label class="inlineLabel">Start</label>
				</div>
				<input id="swapValues" type="button" class="inlineLeft marginRight" value="Swap" style="width:80px;">
				<div class="inlineLeft marginRight">
					<input type="text" value="94.62" id="endVal" style="width:80px">
					<label class="inlineLabel">End</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="number" value="0" id="decimalPlaces" step="1" style="width:50px">
					<label class="inlineLabel">Decimal places</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="number" value="2" id="duration" step=".1" style="width:50px">
					<label class="inlineLabel">Duration</label>
				</div>
			</form>
		</section>
		<section>
			<form>
				<h4 class="inlineLeft noMargin weight300">Options:</h4>
				<div class="inlineLeft marginLeft marginRight">
					<input id="useEasing" type="checkbox" checked><label class="inlineLabel">Use easing</label>
				</div>
				<div class="inlineLeft marginRight">
					<input id="useGrouping" type="checkbox" checked><label class="inlineLabel">Use grouping</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="text" value="," id="separator" style="width:25px; padding:0 5px;">
					<label class="inlineLabel">Separator</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="text" value="." id="decimal" style="width:25px; padding:0 5px;">
					<label class="inlineLabel">Decimal</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="text" value="" id="prefix" style="width:50px; padding:0 5px;">
					<label class="inlineLabel">Prefix</label>
				</div>
				<div class="inlineLeft marginRight">
					<input type="text" value="" id="suffix" style="width:50px; padding:0 5px;">
					<label class="inlineLabel">Suffix</label>
				</div>
			</form>
		</section>
		<section>
			<form>
				<h4 class="inlineLeft noMargin weight300">Methods:</h4>
				<input type="button" value="Start" id="start" class="inlineLeft marginLeft marginRight">
				<input type="button" value="Pause/Resume" id="pauseResume" class="inlineLeft marginRight">
				<input type="button" value="Reset" id="reset" class="inlineLeft marginRight">
				<input type="button" value="Update:" id="update" class="inlineLeft" style="margin-right:5px">
				<div class="inlineLeft marginRight">
					<input type="text" value="6789" id="updateVal" style="width:80px">
				</div>
				<div class="inlineLeft">
					<input type="checkbox" id="useOnComplete"><label class="inlineLabel">Alert on complete</label>
				</div>
			</form>
		</section>
		<section id="easingSection">
			<form>
				<h4 class="inlineLeft noMargin weight300">Custom:</h4>
				<div class="inlineLeft marginLeft">
					<label class="inlineLabel">Easing: &nbsp;</label>
					<select id="easingFnsDropdown" class="marginRight">
						<option value="easeOutExpo" selected>easeOutExpo (default, built-in)</option>
						<option value="outQuintic">outQuintic</option>
						<option value="outCubic">outCubic</option>
					</select>
				</div>
				<div class="inlineLeft marginRight">
					<label class="inlineLabel">Numerals: &nbsp;</label>
					<select id="numeralsDropdown">
						<option value="" selected>Default ("1234")</option>
						<option value="ea">Eastern Arabic ("Ù¡Ù¢Ù£Ù¤")</option>
						<option value="fa">Farsi ("Û±Û²Û³Û´")</option>
					</select>
				</div>
				<div class="inlineLeft">
					<input type="button" id="apply" value="Apply">
				</div>
			</form>
		</section>
		<section class="marginBottom">
			<div class="col full marginBottom marginTop">
				<div class="code-contain indigo">
					<code id="codeVisualizer" class="indigo"></code>
				</div>
			</div>
		</section>
	</div>
	
</body>
</html>
import { CountUp } from './dist/countUp.js';

window.onload = function () {
  var input = function (id) {
    return document.getElementById(id);
  };
  var code, stars, endVal, options;
  var demo = new CountUp('myTargetElement', 100);
  var codeVisualizer = document.getElementById('codeVisualizer');
  var errorSection = document.getElementById('errorSection');
  document.getElementById('version').innerHTML = demo.version;
  // HANDLERS
  input('startVal').onchange = updateCodeVisualizer;
  input('endVal').onchange = updateCodeVisualizer;
  input('decimalPlaces').onchange = updateCodeVisualizer;
  input('duration').onchange = updateCodeVisualizer;
  input('separator').onchange = updateCodeVisualizer;
  input('decimal').onchange = updateCodeVisualizer;
  input('prefix').onchange = updateCodeVisualizer;
  input('suffix').onchange = updateCodeVisualizer;
  input('useEasing').onclick = updateCodeVisualizer;
  input('useGrouping').onclick = updateCodeVisualizer;
  input('useOnComplete').onclick = updateCodeVisualizer;
  input('easingFnsDropdown').onchange = updateCodeVisualizer;
  input('numeralsDropdown').onchange = updateCodeVisualizer;
  document.getElementById('swapValues').onclick = function () {
    var oldStartVal = input('startVal').value;
    var oldEndVal = input('endVal').value;
    input('startVal').value = oldEndVal;
    input('endVal').value = oldStartVal;
    updateCodeVisualizer();
  };
  document.getElementById('start').onclick = createCountUp;
  document.getElementById('apply').onclick = createCountUp;
  document.getElementById('pauseResume').onclick = function () {
    code += '<br>demo.pauseResume();';
    codeVisualizer.innerHTML = code;
    demo.pauseResume();
  };
  document.getElementById('reset').onclick = function () {
    code += '<br>demo.reset();';
    codeVisualizer.innerHTML = code;
    demo.reset();
  };
  document.getElementById('update').onclick = function () {
    var updateVal = input('updateVal').value;
    var num = updateVal ? updateVal : 0;
    code += "<br>demo.update(" + num + ");";
    codeVisualizer.innerHTML = code;
    demo.update(num);
  };
  input('updateVal').onchange = function () {
    var updateVal = input('updateVal').value;
    var num = updateVal ? updateVal : 0;
    code += '<br>demo.update(' + num + ');';
    codeVisualizer.innerHTML = code;
  };
  // OPTION VALUES
  var easingFunctions = {
    easeOutExpo: function (t, b, c, d) {
      return c * (-Math.pow(2, -10 * t / d) + 1) * 1024 / 1023 + b;
    },
    outQuintic: function (t, b, c, d) {
      var ts = (t /= d) * t;
      var tc = ts * t;
      return b + c * (tc * ts + -5 * ts * ts + 10 * tc + -10 * ts + 5 * t);
    },
    outCubic: function (t, b, c, d) {
      var ts = (t /= d) * t;
      var tc = ts * t;
      return b + c * (tc + -3 * ts + 3 * t);
    }
  };
  function getEasingFn() {
    var fn = input('easingFnsDropdown').value;
    if (fn === 'easeOutExpo') {
      return null;
    }
    if (typeof easingFunctions[fn] === 'undefined') {
      return undefined;
    }
    return easingFunctions[fn];
  }
  function getEasingFnBody(fn) {
    fn = typeof fn === 'undefined' ? getEasingFn() : fn;
    if (typeof fn === 'undefined') {
      return 'undefined function';
    }
    if (fn !== null) {
      return fn.toString().replace(/^ {8}/gm, '');
    }
    return '';
  }
  function getNumerals() {
    var numeralsCode = input('numeralsDropdown').value;
    // optionally provide alternates for 0-9
    switch (numeralsCode) {
      case 'ea': // Eastern Arabic
        return ['Ù ', 'Ù¡', 'Ù¢', 'Ù£', 'Ù¤', 'Ù¥', 'Ù¦', 'Ù§', 'Ù¨', 'Ù©'];
      case 'fa': // Farsi
        return ['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹'];
      default:
        return null;
    }
  }
  var stringifyArray = function (arr) { return '[\'' + arr.join('\', \'') + '\']'; };
  // COUNTUP AND CODE VISUALIZER
  function createCountUp() {
    establishOptionsFromInputs();
    demo = new CountUp('myTargetElement', endVal, options);
    if (!demo.error) {
      errorSection.style.display = 'none';
      if (input('useOnComplete').checked) {
        demo.start(methodToCallOnComplete);
      }
      else {
        demo.start();
      }
      updateCodeVisualizer();
    }
    else {
      errorSection.style.display = 'block';
      document.getElementById('error').innerHTML = demo.error;
      console.error(demo.error);
    }
  }
  function methodToCallOnComplete() {
    console.log('COMPLETE!');
    alert('COMPLETE!');
  }
  function establishOptionsFromInputs() {
    endVal = Number(input('endVal').value);
    options = {
      startVal: input('startVal').value,
      decimalPlaces: input('decimalPlaces').value,
      duration: Number(input('duration').value),
      useEasing: input('useEasing').checked,
      useGrouping: input('useGrouping').checked,
      easingFn: typeof getEasingFn() === 'undefined' ? null : getEasingFn(),
      separator: input('separator').value,
      decimal: input('decimal').value,
      prefix: input('prefix').value,
      suffix: input('suffix').value,
      numerals: getNumerals()
    };
    // unset null values so they don't overwrite defaults
    for (var key in options) {
      if (options.hasOwnProperty(key)) {
        if (options[key] === null) {
          delete options[key];
        }
      }
    }
  }
  function updateCodeVisualizer() {
    establishOptionsFromInputs();
    code = '';
    if (options.useEasing && options.easingFn) {
      code += 'const easingFn = ';
      var split = getEasingFnBody(options.easingFn).split('\n');
      for (var line in split) {
        if (split.hasOwnProperty(line)) {
          code += split[line].replace(' ', '&nbsp;') + '<br>';
        }
      }
    }
    function indentedLine(keyPair, singleLine) {
      if (singleLine === void 0) { singleLine = false; }
      var delimeter = (singleLine) ? ';' : ',';
      return "&emsp;&emsp;" + keyPair + delimeter + "<br>";
    }
    var opts = '';
    opts += (options.startVal !== '0') ? indentedLine("startVal: " + options.startVal) : '';
    opts += (options.decimalPlaces !== '0') ? indentedLine("decimalPlaces: " + options.decimalPlaces) : '';
    opts += (options.duration !== 2) ? indentedLine("duration: " + options.duration) : '';
    opts += (options.useEasing) ? '' : indentedLine("useEasing: " + options.useEasing);
    opts += (options.useEasing && options.easingFn) ? indentedLine("easingFn") : '';
    opts += (options.useGrouping) ? '' : indentedLine("useGrouping: " + options.useGrouping);
    opts += (options.separator !== ',') ? indentedLine("separator: '" + options.separator + "'") : '';
    opts += (options.decimal !== '.') ? indentedLine("decimal: '" + options.decimal + "'") : '';
    opts += (options.prefix.length) ? indentedLine("prefix: '" + options.prefix + "'") : '';
    opts += (options.suffix.length) ? indentedLine("suffix: '" + options.suffix + "'") : '';
    opts += (options.numerals && options.numerals.length) ?
      indentedLine("numerals: '" + stringifyArray(options.numerals) + "'") : '';
    if (opts.length) {
      code += "const options = {<br>" + opts + "};<br>";
      code += "let demo = new CountUp('myTargetElement', " + endVal + ", options);<br>";
    }
    else {
      code += "let demo = new CountUp('myTargetElement', " + endVal + ");<br>";
    }
    code += 'if (!demo.error) {<br>';
    code += (input('useOnComplete').checked) ?
      indentedLine('demo.start(methodToCallOnComplete)', true) : indentedLine('demo.start()', true);
    code += '} else {<br>';
    code += indentedLine('console.error(demo.error)', true);
    code += '}';
    codeVisualizer.innerHTML = code;
  }
  // get current star count
  var repoInfoUrl = 'https://api.github.com/repos/inorganik/CountUp.js';
  var getStars = new XMLHttpRequest();
  getStars.open('GET', repoInfoUrl, true);
  getStars.timeout = 5000;
  getStars.onreadystatechange = function () {
    // 2: received headers,  3: loading, 4: done
    if (getStars.readyState === 4) {
      if (getStars.status === 200) {
        if (getStars.responseText !== 'undefined') {
          if (getStars.responseText.length > 0) {
            var data = JSON.parse(getStars.responseText);
            stars = data.stargazers_count;
            // change input values
            input('endVal').value = stars;
            createCountUp();
          }
        }
      }
    }
  };
  getStars.onerror = function () {
    console.error('error getting stars:', getStars.status);
    stars = getStars.status;
    demo.start();
  };
  getStars.send();
}
